{{ attach_library('gtl_theme/header') }}
{{ attach_library('gtl_theme/sidr') }}
{% import '@gtl_theme/icons/icons.twig' as icons %}

{%
  set attributes = attributes ? attributes.addClass('header') : 'class="header header_gatech_new"'
%}
{# If we don't use |raw twig.js tries to escape the quotes on the class attribute. #}

<header role="banner" {{ attributes|raw  }}>
  <div class="header__hatch"></div>
  <div class="header__inner l-center">
    <a href="{{ site_url }}" class="header__logo">
      <img src="/{{ active_theme_path() ~ '/dist/assets/gatech_library.svg' }}" alt="{{ 'Homepage'|t }}">
    </a>
    <div class="header__menu">
      <div class="primary-menu">
        {% include '@gtl_theme/main-menu/main-menu.twig' with {
          "navigation" : navigation
        } %}
      </div>
      <div class="secondary-menu">
        {% if cta is not empty %}
          <a href="{{ cta.url }}" class="header__menu--secondary-item give-item">
            {{ cta.text }}
          </a>
        {% endif %}
        <button class="header__menu--secondary-item search-toggler" aria-label="{{ 'Search'|t }}"></button>
        <a id="mobile-menu-toggler" class="mobile-menu-toggle" href="#sidr">
          <span class="sr-only">{{ 'Toggle mobile menu'|t }}</span>
        </a>
        <div class="header__search-popup-container" aria-hidden="true">
          <div class="header__search-wrapper">
            <input type="search" name="search" placeholder="Search..." class="header__search-input">
            <button class="btn btn--primary header__search-button">
              <span class="sr-only">Search</span>
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">
                <path d="M23.7,22.3l-7.6-7.5c1.4-1.6,2.1-3.7,2.1-5.8c0-5-4.1-9-9.1-9S0,4,0,9c0,5,4.1,9,9.1,9c2,0,3.9-0.6,5.5-1.8l7.7,7.6
                  c0.2,0.2,0.4,0.3,0.7,0.3c0.3,0,0.5-0.1,0.7-0.3C24.1,23.3,24.1,22.7,23.7,22.3z M14,14.1C14,14.1,14,14.1,14,14.1
                  c-1.3,1.2-3.1,1.9-4.9,1.9C5.2,16,2,12.9,2,9s3.2-7,7.1-7s7.1,3.1,7.1,7C16.2,10.9,15.4,12.7,14,14.1z"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div id="sidr">
      <div class="header__mobile-menu-container">
        {% include '@gtl_theme/mobile-menu/mobile-menu.twig' with {
          "navigation" : navigation,
          cta: cta,
        } %}
      </div>
    </div>
  </div>
</header>
