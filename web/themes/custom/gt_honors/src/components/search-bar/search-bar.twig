{{ attach_library('gtl_theme/search-bar') }}
{{ attach_library('gtl_theme/social') }}
{% import '@gtl_theme/icons/icons.twig' as icons %}

<section class="search-bar {{ search_bar.full_width ? 'search-bar__full' : 'search-bar__semi' }}">
  <div class="search-bar__inner">
    {% if search_bar.search_header and not search_bar.full_width %}
      <div class="search-bar__header">
        <h1>{{ search_bar.search_header.text|raw }}</h1>
      </div>
    {% endif %}
    {% block search_form %}
    <div class="search-bar__form-container">
      <div class="search-bar__radio-buttons" id="{{ search_bar.select_list.select_name }}">
        <div class="radio-selector"></div>
        {% for item in search_bar.select_list.options %}
          <input {% if item.name is not empty and item.name == search_bar.select_list.default_option %}checked="checked"{% endif %} type="radio" id="{{ item.text|clean_class }}" name="{{ search_bar.select_list.select_name }}" value="{{ item.text|clean_class }}"/><label for="{{ item.text|clean_class }}">{{ item.text }}</label>
        {% endfor %}
      </div>
      <form class="search-bar__form form-item" role="search" action="/" method="post">
        <label for="search_bar" class="visually-hidden sr-only">{{ 'Search the site'|t }}</label>
        <input type="search" name="search" id="search_bar" placeholder="{{ 'Discover books, media, articles, guides & moreâ€¦'|t }}" class="search-bar__input form-search" />
        <div class="button--wrapper">
          <button class="btn btn--primary" type="submit">
            <span class="sr-only">{{ 'Search'|t }}</span>
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">
            <path d="M23.7,22.3l-7.6-7.5c1.4-1.6,2.1-3.7,2.1-5.8c0-5-4.1-9-9.1-9S0,4,0,9c0,5,4.1,9,9.1,9c2,0,3.9-0.6,5.5-1.8l7.7,7.6
	c0.2,0.2,0.4,0.3,0.7,0.3c0.3,0,0.5-0.1,0.7-0.3C24.1,23.3,24.1,22.7,23.7,22.3z M14,14.1C14,14.1,14,14.1,14,14.1
	c-1.3,1.2-3.1,1.9-4.9,1.9C5.2,16,2,12.9,2,9s3.2-7,7.1-7s7.1,3.1,7.1,7C16.2,10.9,15.4,12.7,14,14.1z"/>
          </svg>
          </button>
          <div class="half--white"></div>
        </div>
      </form>
    </div>
      {% for item in search_bar.select_list.options %}
        {% if item.html %}
          <div class="search-bar__form-footer">
            {{ item.html }}
          </div>
        {% endif %}
      {% endfor %}
      {% if search_bar.hours_of_operation.text and not search_bar.full_width %}
        <section class="search-bar__hours-of-op">
          <span class="hours-statement">{{ 'Library Hours:'|t }}</span> {{ "now"|date("l F j, Y") }}
          <span class="{{ search_bar.hours_of_operation.open ? 'search-bar__hours-open' : 'search-bar__hours-closed' }}">
            {% if search_bar.hours_of_operation.open %}
              <span class="search-bar__icon-container">
                {{ icons.get('open-book', 'search-bar___icon') }}
              </span>
            {% else %}
              <span class="search-bar__icon-container">
                {{ icons.get('calendarx', 'search-bar___icon') }}
              </span>
            {% endif %}
            <span class="search-bar__hours-text">
              {{ search_bar.hours_of_operation.text }}
            </span>
          </span>
        </section>
      {% endif %}
    {% endblock %}

    <div class="social-share chat-only">
      <ul>
        <li class="live-chat-button">
          {{ chat_code|raw }}
        </li>
      </ul>
    </div>
  </div>
</section>
